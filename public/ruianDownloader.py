#RUIAN VDP downloader - download VFR file for "obce" based on ZSJ codelist
import requests
import os

urlVDP = "http://vdp.cuzk.cz/vymenny_format/soucasna/"
date = "20151130";
origHranice = "UKSH";
statGenHranice = "UKSG";

def saveToFile(fileName,content):
	if not os.path.exists("./data/"):
		os.makedirs("./data/")

	with open("./data/" + fileName, "wb") as code:
	    code.write(content)

def downloadFromZSJList():
	zsjList = [581291,586030,582794,582808,593729,584304,581313,593737,581321,581330,593745,582824,582832,593753,593761,581283,586048,586056,582841,593770,582859,592897,592901,593788,593796,584321,595314,584339,593800,581356,595331,584347,581364,581372,593818,592919,593826,582875,593834,592927,582883,582786,584355,581381,581402,584363,584291,584371,592935,581429,582891,593842,592943,586072,581437,581445,581453,584380,581461,586081,581470,593851,554162,593869,550272,582913,586099,586102,593877,586111,593885,581496,593893,581500,595446,582921,582930,586129,593907,582948,581518,592978,584401,581526,593923,584410,592986,593931,546941,593958,586137,593966,584428,582956,595527,584436,586145,582964,581542,595551,595560,582972,592994,586153,584444,581551,593001,593010,586161,593974,593982,593991,594008,594016,593028,581569,582999,594024,583014,550213,594032,583022,584452,593036,581577,594041,594059,593044,594067,581593,586021,583031,581615,550825,584461,594075,594083,594091,594105,595667,581631,513695,584479,583057,594113,593052,594121,593061,586170,594130,583065,594148,586188,586196,584487,593079,594156,583081,584495,593087,583090,586200,581534,583111,594164,593095,594172,584517,583120,593117,581666,594181,594199,586218,583154,581682,594202,584525,594211,593125,586226,583171,594229,550841,583189,586234,594237,595837,583197,586242,550256,587907,586251,583201,584541,584550,586269,581721,581739,593141,584568,583219,593150,593168,594253,581755,586277,584576,581763,583227,581771,550108,586285,593184,593192,581780,583235,594261,581798,594270,584584,593214,584592,594288,581801,550086,593222,593231,595934,581810,581828,594296,593249,594300,581836,581844,581852,581861,581879,583243,555282,583251,595985,595993,586293,586307,594318,586315,558443,594326,584622,581887,583260,581909,583278,584631,594334,583286,594342,583294,594351,593257,581917,581925,581933,581941,586323,581950,581968,594369,583308,594377,581976,583316,553875,586331,586340,593265,581992,596078,594385,531006,594393,583324,593273,586358,582018,593281,594407,582026,582034,582042,586366,583332,583341,593290,583359,594415,594423,583367,550141,583375,583383,582069,586374,584649,594431,593320,594440,582077,593338,586382,584657,594458,594466,583391,583405,594474,583413,586391,584665,583421,583430,593346,594482,586404,584673,584681,593354,557048,583448,586412,586421,594512,583456,596175,586439,583464,593371,582085,583472,584703,594521,593389,593397,593401,586447,583481,593419,583499,593427,596191,584711,593435,584720,586455,583502,583511,593443,584746,586463,584754,587729,582107,582115,583529,583537,582123,582131,594555,594563,594571,582158,582166,550132,596302,583545,594580,583553,593460,583561,582174,583588,594598,583596,582182,583600,586471,506699,593478,582191,584762,594601,584771,584789,596400,582204,586480,582212,594610,594628,550051,550795,594636,593486,584797,594644,594652,583634,550175,584801,549738,584819,583651,583669,584835,583677,583685,594679,594687,583693,594695,594709,582221,583707,593494,586498,549746,550078,584843,583715,583723,583731,584851,593508,593516,586501,583740,593524,582239,582247,583758,583766,584860,582255,593532,586510,583774,594725,586528,582263,596582,583782,554898,513709,593559,583791,594733,582271,582280,582298,583804,594741,593567,553972,594750,583821,583839,549789,596698,582310,584878,582328,591661,583847,583855,583863,594768,582336,545295,586536,586544,582344,549894,594776,593583,582352,594784,593591,583880,586552,583898,556963,594792,583901,584894,584908,594806,586561,586579,594814,594822,584916,586587,586595,582379,583910,594831,593605,582620,582395,586609,555231,594849,586617,582409,582417,586625,583928,586064,582433,582441,582450,583936,586633,594865,584924,594873,593613,586641,594881,582468,582476,583944,584932,583952,582484,582492,583961,594890,594903,594911,593621,586650,582506,594920,594938,583979,586668,586676,583995,594946,583987,584002,596892,593630,584011,594954,594962,584029,594971,593648,594989,584037,586684,594997,584941,584959,584967,595004,550191,582531,586692,595012,534692,584045,582557,584053,549908,595021,582565,584061,582573,553883,584070,586706,582581,584975,595039,582590,582603,582611,593656,593664,595047,584096,530824,593681,586714,584983,584991,585009,582646,585017,545325,595055,586722,586731,595063,584100,584118,582654,584126,582662,595071,595080,585025,586749,586757,582671,584134,584142,586765,550019,584151,595098,582689,585033,595101,595110,597104,585041,595128,586773,584169,595136,582701,595144,584177,592889,585050,584185,595152,584193,584207,586005,595161,584215,582727,584223,593699,593702,582735,593711,584231,586781,586790,584240,586803,582743,597171,582751,584266,586811,595179,584274,586820,586838,582760,595187,582778,595195,584282];
	
	#mensi pocet obci pro otestovani a zejmena debugovani generalizacniho skriptu...
	#zsjList = [581291,586030,582794,582808,593729,584304,581313,593737,581321]

	for zsj_id in zsjList:
		fileName = date + "_OB_" + str(zsj_id) + "_" + origHranice + ".xml.gz"
		url =  urlVDP + fileName
		
		print url
		
		r = requests.get(url)
		saveToFile(fileName, r.content)
		
	#break

def downloadState():
	fileName = date + "_ST_" + origHranice + ".xml.gz"
	url =  urlVDP + fileName
	print url
	r = requests.get(url)
	saveToFile(fileName, r.content)
	

downloadFromZSJList()
downloadState()



